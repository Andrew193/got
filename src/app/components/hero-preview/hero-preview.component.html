<div class="preview-container">
  <div class="m-5">
    <div class="text-center">
      <h3>{{ name }}</h3>
    </div>
    <div class="flex-row main-content">
      <div class="col-lg-4 col-sm-12 p-2 mb-3">
        <div
          class="card hero-card d-flex m-0-auto align-items-center col-12"
          style="max-height: 75vh">
          <img
            class="card-img-top taverna"
            src="{{ selectedHero.fullImgSrc }}"
            alt="{{ selectedHero.name }}" />
          <div class="level">
            <div class="position-relative">
              <img
                src="assets/resourses/imgs/rank/{{
                  heroService.getRank(selectedHero.level)
                }}_r.png"
                alt="rank level"
                class="level_rank"
                [style]="{ height: selectedHero.level === 60 ? '60px' : '' }" />
              <span [style]="{ left: selectedHero.level > 10 ? '16px' : '' }">{{
                selectedHero.level
              }}</span>
            </div>
          </div>
          <rating
            [(ngModel)]="selectedHero.rank"
            [max]="6"
            [readonly]="true"
            [style]="{ position: 'absolute', bottom: 0 }"></rating>
        </div>
      </div>
      <aside
        class="col-lg-8 col-sm-12 p-2 flex-row stats-bar justify-content-between mb-3">
        <div
          class="col-lg-12 col-sm-12 p-2 d-flex flex-column justify-content-evenly">
          <stats [selectedHero]="selectedHero"></stats>
          <skills-render [selectedHero]="selectedHero"></skills-render>
        </div>
      </aside>
      <aside
        class="col-lg-12 col-sm-12 p-2 flex-row stats-bar justify-content-between mb-3">
        <div class="col-lg-12 col-sm-12 p-2 mb-3 eq-container">
          <p class="mb-0 text-center fw-bold">Equipment</p>
          <div class="d-flex flex-wrap gap-1">
            <ng-container
              [ngTemplateOutlet]="itemTemplate"
              [ngTemplateOutletContext]="{ name: 'eq1' }"></ng-container>
            <ng-container
              [ngTemplateOutlet]="itemTemplate"
              [ngTemplateOutletContext]="{ name: 'eq2' }"></ng-container>
            <ng-container
              [ngTemplateOutlet]="itemTemplate"
              [ngTemplateOutletContext]="{ name: 'eq3' }"></ng-container>
            <ng-container
              [ngTemplateOutlet]="itemTemplate"
              [ngTemplateOutletContext]="{ name: 'eq4' }"></ng-container>
          </div>
        </div>
      </aside>
    </div>
    <button class="btn btn-info" (click)="backToTavern()">
      Back to Tavern
    </button>
  </div>
</div>

<ng-template #itemTemplate let-name="name">
  <div class="col-lg-6 col-sm-12 row">
    <div class="col-6 d-flex">
      <div style="min-width: 83px">
        <img [src]="'assets/resourses/imgs/eq/' + name + '.png'" [alt]="name" />
      </div>
      <p class="ps-2">{{ itemDescriptions[name] }}</p>
    </div>
    <div class="col-6 flex-row eq-stats mb-0">
      <div
        class="col-lg-12 col-md-12 col-sm-12 col-12 flex-row justify-content-center mb-0">
        <div class="col-12">
          <div class="flex-row ps-2 mb-0">
            <img
              src="assets/resourses/imgs/icons/attack_icon.png"
              alt="attack" />
            <span>{{
              selectedHero[name + 'Level'] * selectedHero.attackIncrement
            }}</span>
            <span>(+{{ selectedHero.attackIncrement }})</span>
          </div>
          <div class="flex-row ps-2 mb-0">
            <img src="assets/resourses/imgs/icons/def_icon.png" alt="defence" />
            <span>{{
              selectedHero[name + 'Level'] * selectedHero.defenceIncrement
            }}</span>
            <span>+({{ selectedHero.defenceIncrement }})</span>
          </div>
          <div class="flex-row ps-2 mb-0">
            <img
              src="assets/resourses/imgs/icons/health_icon.png"
              alt="health" />
            <span>{{
              selectedHero[name + 'Level'] * selectedHero.healthIncrement
            }}</span>
            <span>(+{{ selectedHero.healthIncrement }})</span>
          </div>
          <p class="text-center mb-2 fw-bold">
            {{ selectedHero[name + 'Level'] }}/200
          </p>
        </div>
      </div>
    </div>
    <div *ngIf="200 - selectedHero[name + 'Level'] > 0">
      <div class="m-0-auto mt-2" style="width: 100px">
        <button class="btn btn-success">Upgrade</button>
      </div>
    </div>
  </div>
</ng-template>
