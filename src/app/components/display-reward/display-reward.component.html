@let _cards = rewards();
@let _containerClass = containerClass();
@let _imageClass = imageClass();

@let _showTotalBar = showTotalBar();
@let _showTotalReward = showTotalReward();

@let _showOpenButton = showOpenButton();
@let _contextName = contextName();

@if (_cards.length) {
  <div
    class="summon-container flip-items-container row gap-2 color-white"
    [class]="_containerClass">
    @for (card of _cards; track $index) {
      @if (card) {
        <div class="flip-items-inner-container col">
          <app-card
            [cardCollectionName]="_contextName"
            [index]="$index"
            [imageClass]="_imageClass" />
        </div>
      } @else {
        <div class="flip-items-inner-container col">
          <i class="material-icons">close</i>
        </div>
      }
    }
    @if (_showOpenButton) {
      <button (click)="revealAll()" class="got-toggle">Open cards</button>
    } @else if (_showTotalBar && _showTotalReward) {
      <div style="grid-template-columns: 1fr 3fr" class="d-grid p-0 gap-2">
        <p class="m-0 total-reward-title">Total reward:</p>
        <div class="row ps-2 pe-2 m-0 gap-2">
          @let _prize = cardsPrize();

          @for (el of _prize; track el[0]) {
            <div class="flip-items-inner-container claimed col">
              <div class="flip-card">
                <div class="card-back">
                  <app-image [alt]="el[0]" [source]="el[1]['src']" [imageClass]="'card-image'" />
                  <span [class]="el[0].toLowerCase()" class="ignore">{{
                    el[1]['amount'] | number
                  }}</span>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    }
  </div>
}
