<div class="c-container d-flex align-items-center justify-content-center">
  <div (appOutsideClick)="closePopup()" class="col-11 inner-container flex-row position-relative">
    <!-- Reward Count Display -->
    <p class="day-count-container">X <span class="day-count">{{ dailyRewardConfig.totalDays || 1 }}</span> награды</p>

    <!-- Hero Preview Section -->
    <div class="position-relative h-100 col-lg-3 col-md-12 col-sm-12">
      <div class="glow-box" (click)="showHeroPreview()">
        <div class="hero-in-frame hero" id="hero-in-frame" #heroInFrame></div>
      </div>
    </div>

    <!-- Rewards Section or Hero Preview -->
    <aside class="p-1 h-100 col-lg-9 col-md-12 col-sm-12 d-flex flex-column justify-content-evenly">
      <!-- Hero Preview Header and Description -->
      <h4 *ngIf="!isHeroPreview" class="text-center caption">Забирай награды каждый день и они будут только расти!!!</h4>

      <!-- Rewards List -->
      @if (!isHeroPreview && dailyRewardConfig.totalDays) {
        <div class="flex-row">
          <ng-container *ngFor="let reward of month; let i = index; trackBy trackByMonthIndex">
            <div class="p-1 day">
              <div class="reward d-flex flex-column p-2" [ngClass]="{'today': +(dailyRewardConfig.day || 1) === i+1}" (click)="claimReward(reward)">
                <span class="text-center mb-1 fw-bold">День {{ i + 1 }}</span>
                @let coins = rewardCoins(reward, i);
                <app-reward-coin *ngFor="let coin of coins"
                                 [useFixSize]="true"
                                 [coinConfig]="coin"></app-reward-coin>
              </div>
            </div>
          </ng-container>
        </div>
      }

      <!-- Hero Preview Details -->
      <div *ngIf="isHeroPreview">
        <h4 id="dialog-sizes-name" class="modal-title text-center w-100 caption mb-2">{{ rewardHero.name }}</h4>
        <p style="font-weight: bold; color: white">{{ rewardHero.description }}</p>

        <!-- Hero Stats Section -->
        <div class="col-lg-11 col-md-12 col-sm-12 stats h-100 flex-row">
          <div class="col-12 mt-2 p-2 justify-content-center align-items-center">
            <stats [selectedHero]="rewardHero"></stats>
          </div>

          <!-- Hero Skills Section -->
          <div class="col-12" style="font-weight: bold">
            <p class="text-center w-100 d-block"><b>Навыки героя</b></p>
            <div class="m-1">
              <div *ngFor="let skill of rewardHero.skills; trackBy trackBySkill" class="row p-2" style="flex-wrap: nowrap">
                <div class="col-1">
                  <img [src]="skill.imgSrc" [alt]="skill.name" class="skill-preview-icon" />
                </div>
                <div class="col-11">
                  <span class="defence-color">{{ skill.name }} {{ skill.passive ? '( P )' : '' }}</span>
                  <div style="position: relative" contextMenuTriggerFor="{{ skill.description }}">
                    <p class="d-inline-block" [innerHTML]="heroService.highlightEffects(skill.description)"></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>
</div>
