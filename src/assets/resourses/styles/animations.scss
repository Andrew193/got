@use "sass:meta";

/* === Glow pulse === */
@mixin glow-pulse($selector: "&", $name: glowPulse, $duration: 2s) {
  animation: #{$name} $duration ease-in-out infinite;

  @keyframes #{$name} {
    0%, 100% { box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.12), 0 8px 16px rgba(0,0,0,.25); }
    50%      { box-shadow: 0 0 12px 4px rgba(255, 215, 0, 0.35), 0 12px 24px rgba(0,0,0,.45); }
  }
}

/* === Shine sweep === */
@mixin shine-sweep(
  $selector: "&",
  $name: shineSweep,
  $duration: .7s,
  $ease: ease,
  $border-radius: 10px,
  $animation-delay: 0s
) {
  #{$selector}::after {
    content: "";
    position: absolute; inset: 0;
    background: linear-gradient(75deg,
      rgba(255,255,255,0) 30%,
      rgba(255,255,255,.7) 50%,
      rgba(255,255,255,0) 70%);
    transform: translateX(-120%) skewX(-20deg);
    animation: #{$name} $duration $ease forwards;
    animation-delay: $animation-delay;
    border-radius: $border-radius;
    pointer-events: none;
    opacity: 0;
  }
  @keyframes #{$name} {
    0%   { transform: translateX(-120%) skewX(-20deg); opacity: 1; }
    80%  { opacity: 1; }
    100% { transform: translateX(140%)  skewX(-20deg); opacity: 0; }
  }
}

/* === Swirl out === */
@mixin swirl-out(
  $selector: "&",
  $name: shineSweep,
  $duration: 1.2s,
  $ease: ease-out,
  $border-radius: 10px,
  $animation-delay: 0s
) {
  #{$selector}::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: transparent;
    box-shadow:
      0 0 #fff, 30px 20px #ffd, -20px 40px #fdf, -40px -30px #cdf,
      60px -20px #fcf, -60px 30px #def, 20px -50px #ffe, -30px 60px #ddf;
    animation: #{$name} $duration $ease forwards;
    animation-delay: $animation-delay;
  }
  @keyframes #{$name} {
    0% {
      transform: scale(0.2) rotate(0deg);
      opacity: 1;
      filter: blur(20px);
    }
    70% {
      transform: scale(1.4) rotate(360deg);
      opacity: 0.8;
      filter: blur(30px);
    }
    100% {
      transform: scale(2.2) rotate(720deg);
      opacity: 0;
      filter: blur(40px);
    }
  }
}

/* === Swirl particles === */
@mixin swirl-particles(
  $selector: "&",
  $name: shineSweep,
  $duration: .7s,
  $ease: ease,
  $border-radius: 10px,
  $animation-delay: 0.4s
) {
  #{$selector}::before {
    content: "";
    position: absolute;
    inset: 0;
    background: transparent;
    box-shadow:
      0 0 6px 2px rgba(255,255,200,0.9),
      40px -20px 8px rgba(200,200,255,0.7),
      -30px 10px 10px rgba(180,255,255,0.6),
      25px 30px 6px rgba(255,150,150,0.7),
      -40px -25px 9px rgba(255,220,180,0.8);
    border-radius: 20%;
    animation: #{$name} $duration $ease forwards;
    animation-delay: $animation-delay;
  }
  @keyframes #{$name} {
    0% {
      transform: scale(0.2) rotate(0deg);
      opacity: 1;
      filter: blur(6px);
    }
    50% {
      transform: scale(0.6) rotate(180deg);
      opacity: 0.9;
      filter: blur(10px);
    }
    100% {
      transform: scale(1.5) rotate(720deg);
      opacity: 0;
      filter: blur(20px);
    }
  }
}

@mixin no-shine($selector: "&") {
  #{$selector}::after { display: none !important; }
}

@mixin glow-pulse-border($selector: "&", $name: glowPulse, $duration: 2s) {
  border: 2px solid rgba(255, 215, 0, 0.85);
  box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.15), 0 10px 20px rgba(0,0,0,.35);

  @include glow-pulse($selector, $name, $duration);
}

/* === Rotate === */
@mixin rotate($name: rotating, $duration: infinite) {
  -webkit-animation: $name 2s linear $duration;
  -moz-animation: $name 2s linear $duration;
  -ms-animation: $name 2s linear $duration;
  -o-animation: $name 2s linear $duration;
  animation: $name 2s linear $duration;

  @-webkit-keyframes #{$name} {
    from {
      -webkit-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    to {
      -webkit-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @keyframes #{$name} {
    from {
      -ms-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -webkit-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    to {
      -ms-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -webkit-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }
}
